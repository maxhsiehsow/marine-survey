<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æµ·å»¢èª¿æŸ¥å“¡ V13 (å–®æ©Ÿç‰ˆ)</title>
    
    <style>
        body { font-family: -apple-system, sans-serif; background: #e0f7fa; text-align: center; padding: 15px; margin: 0; padding-bottom: 80px; }
        .page { display: none; }
        #p1 { display: block; }

        .card { background: white; padding: 20px; border-radius: 12px; margin-bottom: 15px; text-align: left; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h2 { margin-top: 0; color: #006064; font-size: 18px; border-bottom: 2px solid #b2ebf2; padding-bottom: 10px; }
        
        input, select { width: 100%; padding: 12px; margin: 5px 0 15px 0; border: 2px solid #0097a7; border-radius: 8px; font-size: 16px; background: #fff; box-sizing: border-box; }
        
        button { width: 100%; padding: 15px; border: none; border-radius: 8px; font-size: 18px; font-weight: bold; cursor: pointer; color: white; margin-top: 5px; }
        button:active { opacity: 0.7; transform: scale(0.98); }
        .btn-green { background: #00897b; }
        .btn-blue { background: #0288d1; }
        .btn-red { background: #d32f2f; }
        .btn-orange { background: #f57c00; }

        /* é€²åº¦æ¢ */
        #progress-bar { height: 10px; background: #ddd; border-radius: 5px; margin: 10px 0; overflow: hidden; }
        #progress-fill { height: 100%; background: #00acc1; width: 0%; transition: 0.3s; }

        /* å ±å‘Šå€ */
        #report-area { background: white; padding: 15px; border: 2px solid #006064; text-align: center; }
        .evidence-img { width: 100%; margin-top: 10px; display: none; border: 1px solid #999; }
        
        /* çµ±è¨ˆåˆ—è¡¨ */
        #stats-list { list-style: none; padding: 0; margin: 0; text-align: left; }
        #stats-list li { padding: 8px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; }
        #stats-list li span { font-weight: bold; color: #006064; }
    </style>
</head>
<body>

    <div id="p1" class="page">
        <h1 style="color:#006064;">ğŸ“‹ æµ·å»¢èª¿æŸ¥ V13</h1>
        
        <div class="card">
            <h2>1. åŸºæœ¬è³‡æ–™</h2>
            <label>å§“åï¼š</label>
            <input type="text" id="inp_name" placeholder="è«‹è¼¸å…¥å§“å">
            <label>äººæ•¸ï¼š</label>
            <input type="number" id="inp_team" value="1">
        </div>

        <div class="card">
            <h2>2. å®šä½</h2>
            <button class="btn-blue" onclick="doGPS()">ğŸ“ æŠ“å– GPS (åŸç”Ÿ)</button>
            <input type="text" id="inp_gps" placeholder="å°šæœªå®šä½" readonly style="background:#f1f8e9;">
            <label>åœ°é»åç¨±ï¼š</label>
            <input type="text" id="inp_loc" placeholder="ä¾‹å¦‚ï¼šå¤–æ¾³æ²™ç˜">
        </div>

        <button class="btn-green" onclick="goP2()">ä¸‹ä¸€æ­¥ â¡ï¸</button>
    </div>

    <div id="p2" class="page">
        <div class="card" style="text-align:center;">
            é€²åº¦ï¼š<b id="txt_count" style="color:red; font-size:24px;">0</b> / 10
            <div id="progress-bar"><div id="progress-fill"></div></div>
            <button class="btn-orange" id="force-btn" onclick="goP3()" style="display:none; font-size:14px;">ğŸ çµç®—æˆæœ</button>
        </div>

        <div class="card">
            <h2>âŒ¨ï¸ è¨˜éŒ„æµ·å»¢</h2>
            <p style="color:#666; font-size:14px; margin-top:0;">è«‹ç›´æ¥é¸æ“‡ç“¶ç½ä¸Šçš„åœ‹å®¶ï¼š</p>
            <select id="sel_country">
                <option value="">ğŸ‘‡ é»æ­¤é¸æ“‡...</option>
                <option value="ğŸ‡¹ğŸ‡¼ å°ç£ (Taiwan)">ğŸ‡¹ğŸ‡¼ å°ç£</option>
                <option value="ğŸ‡¨ğŸ‡³ ä¸­åœ‹ (China)">ğŸ‡¨ğŸ‡³ ä¸­åœ‹</option>
                <option value="ğŸ‡¯ğŸ‡µ æ—¥æœ¬ (Japan)">ğŸ‡¯ğŸ‡µ æ—¥æœ¬</option>
                <option value="ğŸ‡°ğŸ‡· éŸ“åœ‹ (Korea)">ğŸ‡°ğŸ‡· éŸ“åœ‹</option>
                <option value="ğŸ‡»ğŸ‡³ è¶Šå— (Vietnam)">ğŸ‡»ğŸ‡³ è¶Šå—</option>
                <option value="ğŸ‡¹ğŸ‡­ æ³°åœ‹ (Thailand)">ğŸ‡¹ğŸ‡­ æ³°åœ‹</option>
                <option value="ğŸ‡®ğŸ‡© å°å°¼ (Indonesia)">ğŸ‡®ğŸ‡© å°å°¼</option>
                <option value="ğŸ‡µğŸ‡­ è²å¾‹è³“ (Philippines)">ğŸ‡µğŸ‡­ è²å¾‹è³“</option>
                <option value="ğŸ‡ºğŸ‡¸ ç¾åœ‹ (USA)">ğŸ‡ºğŸ‡¸ ç¾åœ‹</option>
                <option value="â“ ç„¡æ³•è¾¨è­˜">â“ ç„¡æ³•è¾¨è­˜</option>
            </select>
            <button class="btn-green" onclick="addRec()">â• è¨˜éŒ„é€™ä¸€ç­†</button>
        </div>
        
        <button class="btn-red" onclick="undo()" style="opacity:0.7;">â†©ï¸ åˆªé™¤ä¸Šä¸€ç­†</button>
    </div>

    <div id="p3" class="page">
        <h1 style="color:#006064;">ğŸ‰ èª¿æŸ¥å®Œæˆ</h1>
        
        <div class="card">
            <h2>ğŸ“¸ æ­¥é©Ÿ 1: æ‹ç…§å­˜è­‰</h2>
            <input type="file" accept="image/*" onchange="loadImg(event)">
        </div>

        <div class="card">
            <h2>ğŸ“„ æ­¥é©Ÿ 2: æ‚¨çš„å ±å‘Š</h2>
            <p style="font-size:12px; color:red;">*æ­¤ç‰ˆæœ¬ä¸æ”¯æ´è‡ªå‹•ä¸‹è¼‰åœ–ç‰‡ï¼Œè«‹ç›´æ¥ã€Œæ‰‹æ©Ÿæˆªåœ–ã€æ­¤ç•«é¢ä¿å­˜ã€‚</p>
            
            <div id="report-area">
                <div style="background:#006064; color:white; padding:10px; margin-bottom:10px;">
                    <h3 style="margin:0;">æµ·å»¢èª¿æŸ¥å ±å‘Š</h3>
                </div>
                <div style="text-align:left; font-size:14px; line-height:1.6; border-bottom:1px solid #ccc; padding-bottom:10px; margin-bottom:10px;">
                    <strong>æ—¥æœŸï¼š</strong><span id="out_date"></span><br>
                    <strong>äººå“¡ï¼š</strong><span id="out_name"></span> (<span id="out_team"></span>äºº)<br>
                    <strong>GPSï¼š</strong><span id="out_gps"></span><br>
                    <strong>åœ°é»ï¼š</strong><span id="out_loc"></span>
                </div>
                
                <h4 style="margin:0 0 5px 0;">ğŸ“Š çµ±è¨ˆçµæœ</h4>
                <ul id="stats-list">
                    </ul>

                <img id="out_img" class="evidence-img">
            </div>
        </div>

        <button class="btn-blue" onclick="location.reload()" style="margin-top:20px;">ğŸ”„ é–‹å§‹æ–°èª¿æŸ¥</button>
    </div>

<script>
    // === è®Šæ•¸ ===
    var count = 0;
    var target = 10;
    var stats = {};
    var historyStack = [];

    // === é–‹å ´æ¸¬è©¦ ===
    window.onload = function() {
        console.log("V13 å•Ÿå‹•");
        // å˜—è©¦éœ‡å‹•ä¸€ä¸‹ç¢ºèª JS æ´»è‘—
        if(navigator.vibrate) navigator.vibrate(100);
    };

    // === 1. GPS (åŸç”Ÿ) ===
    function doGPS() {
        var field = document.getElementById('inp_gps');
        field.value = "å®šä½ä¸­...";
        
        if (!navigator.geolocation) {
            alert("ä¸æ”¯æ´ GPS");
            field.value = "ç„¡è¨Šè™Ÿ";
            return;
        }

        navigator.geolocation.getCurrentPosition(
            function(pos) {
                field.value = pos.coords.latitude.toFixed(5) + ", " + pos.coords.longitude.toFixed(5);
                alert("âœ… å®šä½æˆåŠŸ");
            },
            function(err) {
                alert("å®šä½å¤±æ•— (è«‹ç¢ºèª HTTPS æˆ–æ¬Šé™)");
                field.value = "";
            },
            { timeout: 5000 }
        );
    }

    // === 2. åˆ‡æ›é é¢ ===
    function goP2() {
        var name = document.getElementById('inp_name').value;
        if(!name) { alert("è«‹è¼¸å…¥å§“å"); return; }
        
        document.getElementById('p1').style.display = 'none';
        document.
