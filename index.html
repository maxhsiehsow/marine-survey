<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æµ·å»¢èª¿æŸ¥å“¡ V14</title>
    <style>
        body { font-family: sans-serif; padding: 10px; background: #fff; color: #333; max-width: 600px; margin: 0 auto; }
        
        /* å€å¡Šæ¨£å¼ï¼šåªæœ‰é‚Šæ¡†ï¼Œä¸åšéš±è— */
        .section { border: 2px solid #333; padding: 15px; margin-bottom: 20px; border-radius: 10px; background: #f9f9f9; }
        
        h2 { margin-top: 0; background: #333; color: #fff; padding: 5px; font-size: 18px; }
        label { font-weight: bold; display: block; margin-top: 10px; }
        
        input, select { width: 100%; padding: 10px; font-size: 16px; margin: 5px 0; box-sizing: border-box; border: 1px solid #999; }
        
        /* æŒ‰éˆ•ï¼šä¸åšèŠ±ä¿ç‰¹æ•ˆï¼Œç¢ºä¿èƒ½æŒ‰ */
        button { width: 100%; padding: 15px; font-size: 18px; margin-top: 10px; cursor: pointer; background: #007bff; color: white; border: none; border-radius: 5px; }
        button:active { background: #0056b3; }
        
        /* è¡¨æ ¼æ¨£å¼ */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background: #eee; }

        .big-text { font-size: 20px; color: red; font-weight: bold; }
    </style>
</head>
<body>

    <div style="text-align:center; padding:10px; background:#ffeb3b; margin-bottom:10px;" id="js-status">
        âš ï¸ ç³»çµ±è¼‰å…¥ä¸­...<br>(å¦‚æœæ²’è®Šå­—ï¼Œä»£è¡¨ JS è¢«å°é–)
    </div>

    <h1>ğŸ“‹ æµ·å»¢èª¿æŸ¥ (V14 ç›´é€šç‰ˆ)</h1>
    <p>èªªæ˜ï¼šæ­¤ç‰ˆæœ¬ä¸éœ€è¦åˆ‡æ›é é¢ï¼Œè«‹å¾ä¸Šå¾€ä¸‹æ“ä½œã€‚</p>

    <div class="section">
        <h2>1. è¨­å®šèˆ‡å®šä½</h2>
        <label>èª¿æŸ¥å“¡å§“åï¼š</label>
        <input type="text" id="inp_name" placeholder="è«‹è¼¸å…¥å§“å">
        
        <label>GPS åº§æ¨™ï¼š</label>
        <button onclick="getGPS()" style="background:#28a745;">ğŸ“ é»æˆ‘æŠ“å– GPS</button>
        <input type="text" id="inp_gps" readonly value="å°šæœªå®šä½">
        
        <label>åœ°é»åç¨±ï¼š</label>
        <input type="text" id="inp_loc" placeholder="ä¾‹å¦‚ï¼šæ²™ç˜">
    </div>

    <div class="section">
        <h2>2. é–‹å§‹è¨˜éŒ„</h2>
        <div style="text-align:center; margin-bottom:10px;">
            ç›®å‰æ•¸é‡ï¼š<span id="count_display" class="big-text">0</span> / 10
        </div>

        <label>é¸æ“‡åœ‹å®¶ï¼š</label>
        <select id="sel_country">
            <option value="">ğŸ‘‡ è«‹é»æ­¤é¸æ“‡...</option>
            <option value="ğŸ‡¹ğŸ‡¼ å°ç£">ğŸ‡¹ğŸ‡¼ å°ç£</option>
            <option value="ğŸ‡¨ğŸ‡³ ä¸­åœ‹">ğŸ‡¨ğŸ‡³ ä¸­åœ‹</option>
            <option value="ğŸ‡¯ğŸ‡µ æ—¥æœ¬">ğŸ‡¯ğŸ‡µ æ—¥æœ¬</option>
            <option value="ğŸ‡°ğŸ‡· éŸ“åœ‹">ğŸ‡°ğŸ‡· éŸ“åœ‹</option>
            <option value="ğŸ‡»ğŸ‡³ è¶Šå—">ğŸ‡»ğŸ‡³ è¶Šå—</option>
            <option value="ğŸ‡¹ğŸ‡­ æ³°åœ‹">ğŸ‡¹ğŸ‡­ æ³°åœ‹</option>
            <option value="ğŸ‡®ğŸ‡© å°å°¼">ğŸ‡®ğŸ‡© å°å°¼</option>
            <option value="ğŸ‡µğŸ‡­ è²å¾‹è³“">ğŸ‡µğŸ‡­ è²å¾‹è³“</option>
            <option value="ğŸ‡ºğŸ‡¸ ç¾åœ‹">ğŸ‡ºğŸ‡¸ ç¾åœ‹</option>
            <option value="â“ ç„¡æ³•è¾¨è­˜">â“ ç„¡æ³•è¾¨è­˜</option>
        </select>

        <button onclick="addRecord()" style="background:#007bff;">â• å¢åŠ ä¸€ç­†</button>
        <button onclick="undo()" style="background:#dc3545; margin-top:10px;">â†©ï¸ åˆªé™¤ä¸Šä¸€ç­†</button>
    </div>

    <div class="section" id="report-area">
        <h2>3. èª¿æŸ¥æˆæœ (å³æ™‚æ›´æ–°)</h2>
        <div style="font-size:14px; line-height:1.5;">
            <strong>æ—¥æœŸï¼š</strong><span id="out_date"></span><br>
            <strong>äººå“¡ï¼š</strong><span id="out_name"></span><br>
            <strong>åœ°é»ï¼š</strong><span id="out_loc"></span><br>
            <strong>GPSï¼š</strong><span id="out_gps"></span>
        </div>
        
        <table id="stats-table">
            <thead>
                <tr>
                    <th>åœ‹å®¶</th>
                    <th>æ•¸é‡</th>
                </tr>
            </thead>
            <tbody id="stats-body">
                <tr><td colspan="2">å°šæœªæœ‰è³‡æ–™</td></tr>
            </tbody>
        </table>

        <label>æ­¥é©Ÿ 4: æ‹æ”ç…§ç‰‡ (è«‹æ‰‹å‹•æˆªåœ–ä¿å­˜)</label>
        <input type="file" accept="image/*" onchange="previewImage(event)">
        <img id="out_img" style="width:100%; display:none; margin-top:10px; border:1px solid #000;">
    </div>

    <script>
        // === è‡ªæˆ‘æª¢æ¸¬ ===
        window.onload = function() {
            document.getElementById('js-status').innerText = "âœ… ç³»çµ±æ­£å¸¸é‹ä½œä¸­";
            document.getElementById('js-status').style.background = "#d4edda";
            
            // å¡«å…¥é è¨­æ—¥æœŸ
            var d = new Date();
            document.getElementById('out_date').innerText = d.getFullYear() + "/" + (d.getMonth()+1) + "/" + d.getDate();
        };

        // è®Šæ•¸
        var count = 0;
        var stats = {};
        var historyStack = [];

        // === åŠŸèƒ½ 1: GPS ===
        function get
