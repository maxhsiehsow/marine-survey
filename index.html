<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æµ·å»¢èª¿æŸ¥å“¡ V11 (ç©©å¥ç‰ˆ)</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>

    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: #e0f7fa; text-align: center; padding: 15px; margin: 0; padding-bottom: 80px; }
        .page { display: none; }
        #p1 { display: block; } /* é è¨­é¡¯ç¤ºé¦–é  */

        .card { background: white; padding: 15px; border-radius: 12px; margin-bottom: 15px; text-align: left; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        h2 { margin-top: 0; color: #006064; font-size: 18px; border-bottom: 1px solid #b2ebf2; padding-bottom: 8px; }
        
        input, select { width: 100%; padding: 12px; margin: 5px 0 15px 0; border: 2px solid #b2ebf2; border-radius: 8px; font-size: 16px; background: #fff; box-sizing: border-box; }
        
        /* æŒ‰éˆ•æ¨£å¼ */
        button { width: 100%; padding: 14px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; color: white; margin-top: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        button:active { transform: scale(0.98); }
        .btn-green { background: #00897b; }
        .btn-blue { background: #039be5; }
        .btn-red { background: #e53935; }
        .btn-orange { background: #fb8c00; }

        /* é€²åº¦æ¢ */
        #progress-box { background: white; padding: 10px; border-radius: 8px; margin-bottom: 10px; font-weight: bold; color: #006064; }
        
        /* æƒæè¦–çª— */
        #reader { width: 100%; background: black; display: none; border-radius: 8px; margin-bottom: 10px; }

        /* å ±å‘Šæˆªåœ–å€ */
        #report-area { background: white; padding: 15px; border: 1px solid #ccc; text-align: center; }
        .evidence-img { width: 100%; max-height: 300px; object-fit: cover; margin-top: 10px; display: none; border: 1px solid #999; }
    </style>
</head>
<body>

    <div id="p1" class="page">
        <h1 style="color:#006064; margin-bottom:10px;">ğŸ“‹ æµ·å»¢èª¿æŸ¥ V11</h1>
        
        <div class="card">
            <h2>1. åŸºæœ¬è³‡æ–™</h2>
            <label>èª¿æŸ¥å“¡å§“åï¼š</label>
            <input type="text" id="inp_name" placeholder="è«‹è¼¸å…¥å§“å">
            <label>åŒä¼´äººæ•¸ï¼š</label>
            <input type="number" id="inp_team" value="1">
        </div>

        <div class="card">
            <h2>2. åœ°é»å®šä½</h2>
            <button class="btn-blue" onclick="doGPS()">ğŸ“ æŠ“å– GPS</button>
            <input type="text" id="inp_gps" placeholder="å°šæœªå®šä½" readonly style="background:#f1f8e9;">
            <label>åœ°é»åç¨±ï¼š</label>
            <input type="text" id="inp_loc" placeholder="ä¾‹å¦‚ï¼šå¤–æ¾³æ²™ç˜">
        </div>

        <button class="btn-green" onclick="goP2()">ä¸‹ä¸€æ­¥ï¼šé–‹å§‹èª¿æŸ¥ â¡ï¸</button>
    </div>

    <div id="p2" class="page">
        <div id="progress-box">
            é€²åº¦ï¼š<span id="txt_count" style="color:#e53935; font-size:22px;">0</span> / 10
            <button class="btn-orange" id="force-btn" onclick="goP3()" style="display:none; margin-top:5px; font-size:14px; padding:8px;">ğŸ çµç®—æˆæœ</button>
        </div>

        <div class="card">
            <h2>ğŸ“· æƒææ¢ç¢¼</h2>
            <div id="reader"></div>
            <button id="btn-cam-start" class="btn-blue" onclick="startCam()">å•Ÿå‹•ç›¸æ©Ÿ</button>
            <button id="btn-cam-stop" class="btn-red" onclick="stopCam()" style="display:none;">é—œé–‰ç›¸æ©Ÿ</button>
        </div>

        <div class="card">
            <h2>âŒ¨ï¸ æ‰‹å‹•è¨˜éŒ„</h2>
            <select id="sel_country">
                <option value="">ğŸ‘‡ è«‹é¸æ“‡åœ‹å®¶...</option
